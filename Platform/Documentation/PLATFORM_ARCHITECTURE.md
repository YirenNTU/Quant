# ğŸ“Š Investment AI Platform - å®Œæ•´æ¶æ§‹è¨­è¨ˆ

## ğŸ¯ ç›®æ¨™

å»ºç«‹ä¸€å€‹è®“æœ‹å‹å¯ä»¥è¼•é¬†ä½¿ç”¨çš„é‡åŒ–äº¤æ˜“å¹³å°ï¼š
1. **ç­–ç•¥ç·¨å¯«**: ç”¨ç°¡å–®èªæ³•å®šç¾©ç­–ç•¥
2. **æ­·å²å›æ¸¬**: è‡ªå‹•åŸ·è¡Œ 2 å¹´æ­·å²å›æ¸¬
3. **è³‡ç”¢é…ç½®**: ç”¢å‡ºç•¶ä¸‹æ‡‰è©²è²·çš„è‚¡ç¥¨æ¸…å–®

---

## ğŸ—ï¸ ç³»çµ±æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Platform API (æ•´åˆä»‹é¢)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  from Platform import run_strategy, backtest, get_allocation  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â–¼                         â–¼                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  StrategyBase   â”‚    â”‚     Backtester      â”‚    â”‚    Allocator    â”‚
â”‚  (ç­–ç•¥åŸºç¤é¡åˆ¥)  â”‚    â”‚    (å›æ¸¬å¼•æ“)        â”‚    â”‚  (è³‡ç”¢é…ç½®å™¨)    â”‚
â”‚                 â”‚    â”‚                     â”‚    â”‚                 â”‚
â”‚ â€¢ compute()     â”‚    â”‚ â€¢ æ¯æ—¥æ¨¡æ“¬äº¤æ˜“       â”‚    â”‚ â€¢ è®€å–ç­–ç•¥åˆ†æ•¸   â”‚
â”‚ â€¢ get_signals() â”‚â”€â”€â”€â–¶â”‚ â€¢ è¨ˆç®—å ±é…¬/é¢¨éšª      â”‚â”€â”€â”€â–¶â”‚ â€¢ ç”¢ç”Ÿé…ç½®æ¸…å–®   â”‚
â”‚ â€¢ parameters    â”‚    â”‚ â€¢ ç¸¾æ•ˆå ±è¡¨          â”‚    â”‚ â€¢ è€ƒæ…®é¢¨éšªç®¡ç†   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                         â”‚                         â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Strategy Manager (ç­–ç•¥ç®¡ç†å¾Œå°)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â€¢ è¼‰å…¥ç­–ç•¥æª”æ¡ˆ (strategies/*.py)                             â”‚  â”‚
â”‚  â”‚  â€¢ é©—è­‰ç­–ç•¥èªæ³•                                               â”‚  â”‚
â”‚  â”‚  â€¢ åŸ·è¡Œå¤šç­–ç•¥ä¸¦è¡Œ                                             â”‚  â”‚
â”‚  â”‚  â€¢ å„²å­˜å›æ¸¬çµæœ                                               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â–¼                                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Factor Operators            â”‚    â”‚          FieldDB            â”‚
â”‚         (é‹ç®—å·¥å…·åº«)                 â”‚    â”‚        (è³‡æ–™åº«)              â”‚
â”‚                                     â”‚    â”‚                             â”‚
â”‚ ts_zscore, ts_delta, ts_rank        â”‚    â”‚ close, volume, pe, pb       â”‚
â”‚ zscore, rank, decay_linear          â”‚    â”‚ tej_gpm, qfii_net, etc.     â”‚
â”‚ momentum, rsi, volatility           â”‚    â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ æª”æ¡ˆçµæ§‹

```
Platform/
â”œâ”€â”€ __init__.py              # ä¸»å…¥å£ï¼ŒåŒ¯å‡ºæ‰€æœ‰ API
â”œâ”€â”€ Core/
â”‚   â”œâ”€â”€ build_field_database.py   # è³‡æ–™åº«å»ºæ§‹
â”‚   â””â”€â”€ validate_field_database.py # è³‡æ–™åº«é©—è­‰
â”œâ”€â”€ FieldDB/                 # æ¬„ä½è³‡æ–™åº« (Parquet)
â”‚   â”œâ”€â”€ price/
â”‚   â”œâ”€â”€ financials/
â”‚   â”œâ”€â”€ chip/
â”‚   â””â”€â”€ ...
â”œâ”€â”€ Factors/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ operators.py         # é‹ç®—å·¥å…·åº«
â”œâ”€â”€ Strategies/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ base.py              # StrategyBase åŸºç¤é¡åˆ¥
â”‚   â”œâ”€â”€ examples/            # ç¯„ä¾‹ç­–ç•¥
â”‚   â”‚   â”œâ”€â”€ momentum.py
â”‚   â”‚   â”œâ”€â”€ value.py
â”‚   â”‚   â””â”€â”€ combined.py
â”‚   â””â”€â”€ user_strategies/     # ä½¿ç”¨è€…è‡ªè¨‚ç­–ç•¥
â”‚       â””â”€â”€ my_strategy.py
â”œâ”€â”€ Backtest/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ engine.py            # å›æ¸¬å¼•æ“
â”‚   â”œâ”€â”€ metrics.py           # ç¸¾æ•ˆæŒ‡æ¨™è¨ˆç®—
â”‚   â””â”€â”€ report.py            # å ±è¡¨ç”Ÿæˆ
â”œâ”€â”€ Allocator/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ allocator.py         # è³‡ç”¢é…ç½®å™¨
â””â”€â”€ Documentation/
    â”œâ”€â”€ DATA_DICTIONARY.md
    â”œâ”€â”€ FIELD_REFERENCE.md
    â””â”€â”€ PLATFORM_ARCHITECTURE.md
```

---

## ğŸ”§ æ¨¡çµ„è©³ç´°è¨­è¨ˆ

### 1ï¸âƒ£ StrategyBase (ç­–ç•¥åŸºç¤é¡åˆ¥)

```python
from Platform.Strategies import Strategy
from Platform.Factors import *

class MyStrategy(Strategy):
    name = "æˆ‘çš„å‹•é‡ç­–ç•¥"
    description = "è²·å…¥éå»20å¤©æ¼²å¹…æœ€å¤§çš„è‚¡ç¥¨"
    
    # ç­–ç•¥åƒæ•¸
    params = {
        "lookback": 20,
        "top_n": 10,
    }
    
    def compute(self, db):
        """è¨ˆç®—å› å­åˆ†æ•¸"""
        close = db.get('close')
        volume = db.get('volume')
        
        # å‹•é‡å› å­
        momentum = ts_pct_change(close, self.params["lookback"])
        
        # æˆäº¤é‡ç¢ºèª
        vol_rank = ts_rank(volume, 20)
        
        # ç¶œåˆåˆ†æ•¸
        score = 0.7 * zscore(momentum) + 0.3 * zscore(vol_rank)
        
        return score
    
    def get_signals(self, score):
        """ç”¢ç”Ÿäº¤æ˜“ä¿¡è™Ÿ"""
        # å–åˆ†æ•¸æœ€é«˜çš„ N æª”
        top_n = self.params["top_n"]
        signals = rank(score).apply(lambda x: 1 if x >= 1 - top_n/len(x) else 0)
        return signals
```

### 2ï¸âƒ£ Backtester (å›æ¸¬å¼•æ“)

```python
from Platform.Backtest import Backtester

# åŸ·è¡Œå›æ¸¬
result = Backtester.run(
    strategy=MyStrategy,
    start_date="2024-01-01",
    end_date="2026-01-31",
    initial_capital=1000000,
    rebalance_freq="weekly",  # daily, weekly, monthly
    transaction_cost=0.001425,  # æ‰‹çºŒè²» 0.1425%
    slippage=0.001,  # æ»‘åƒ¹ 0.1%
)

# æŸ¥çœ‹çµæœ
print(result.summary())
# ç¸½å ±é…¬: +45.2%
# å¹´åŒ–å ±é…¬: +21.3%
# å¤æ™®æ¯”ç‡: 1.45
# æœ€å¤§å›æ’¤: -12.3%
# å‹ç‡: 58%
```

### 3ï¸âƒ£ Allocator (è³‡ç”¢é…ç½®å™¨)

```python
from Platform.Allocator import get_allocation

# å–å¾—ä»Šæ—¥é…ç½®å»ºè­°
allocation = get_allocation(
    strategy=MyStrategy,
    capital=1000000,
    max_positions=10,
    max_weight=0.15,  # å–®ä¸€æ¨™çš„æœ€å¤§æ¬Šé‡ 15%
)

# è¼¸å‡º
print(allocation)
# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚ è‚¡ç¥¨    â”‚ æ¬Šé‡   â”‚ å¼µæ•¸   â”‚ é‡‘é¡   â”‚
# â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
# â”‚ 2330   â”‚ 15.0%  â”‚ 1      â”‚ 150000 â”‚
# â”‚ 2317   â”‚ 12.5%  â”‚ 5      â”‚ 125000 â”‚
# â”‚ 2454   â”‚ 10.0%  â”‚ 2      â”‚ 100000 â”‚
# â”‚ ...    â”‚ ...    â”‚ ...    â”‚ ...    â”‚
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4ï¸âƒ£ Strategy Manager (ç­–ç•¥ç®¡ç†å¾Œå°)

```python
from Platform.Strategies import StrategyManager

# è¼‰å…¥æ‰€æœ‰ç­–ç•¥
manager = StrategyManager()
manager.load_strategies("Platform/Strategies/user_strategies/")

# åˆ—å‡ºå¯ç”¨ç­–ç•¥
print(manager.list_strategies())
# [MomentumStrategy, ValueStrategy, CombinedStrategy]

# åŸ·è¡Œå–®ä¸€ç­–ç•¥
result = manager.run("MomentumStrategy")

# åŸ·è¡Œæ‰€æœ‰ç­–ç•¥ä¸¦æ¯”è¼ƒ
comparison = manager.run_all()
print(comparison.ranking())
```

---

## ğŸš€ å¯¦ç¾é †åº

| é †åº | æ¨¡çµ„ | èªªæ˜ | ä¾è³´ |
|-----|------|------|-----|
| 1 | StrategyBase | ç­–ç•¥åŸºç¤é¡åˆ¥ | FieldDB, Factors |
| 2 | Backtester | å›æ¸¬å¼•æ“ | StrategyBase |
| 3 | StrategyManager | ç­–ç•¥ç®¡ç†å¾Œå° | Backtester |
| 4 | Allocator | è³‡ç”¢é…ç½®å™¨ | StrategyManager |
| 5 | Platform API | æ•´åˆä»‹é¢ | å…¨éƒ¨ |

---

## ğŸ“‹ ä½¿ç”¨è€…æµç¨‹

### æœ‹å‹å¯«ç­–ç•¥

```python
# strategies/user_strategies/my_momentum.py

from Platform.Strategies import Strategy
from Platform.Factors import *

class MyMomentum(Strategy):
    name = "æˆ‘çš„å‹•é‡ç­–ç•¥"
    params = {"lookback": 20}
    
    def compute(self, db):
        close = db.get('close')
        return zscore(ts_pct_change(close, self.params["lookback"]))
```

### ä½ åŸ·è¡Œå›æ¸¬

```bash
python -m Platform.run --strategy my_momentum --backtest
```

### æŸ¥çœ‹çµæœä¸¦é…ç½®

```bash
python -m Platform.run --strategy my_momentum --allocate --capital 1000000
```

---

## ğŸ”‘ é—œéµè¨­è¨ˆåŸå‰‡

1. **ç°¡å–®æ˜“ç”¨**: æœ‹å‹åªéœ€è¦å¯¦ä½œ `compute()` æ–¹æ³•
2. **è‡ªå‹•åŒ–**: å›æ¸¬ã€å ±è¡¨ã€é…ç½®å…¨è‡ªå‹•
3. **å®‰å…¨éš”é›¢**: ç­–ç•¥åœ¨æ²™ç›’ä¸­åŸ·è¡Œï¼Œä¸æœƒå½±éŸ¿ç³»çµ±
4. **å¯æ“´å±•**: å®¹æ˜“æ·»åŠ æ–°çš„å› å­å’ŒæŒ‡æ¨™
5. **é«˜æ•ˆèƒ½**: ä½¿ç”¨ Pandas å‘é‡åŒ–é‹ç®—
